@* Author: Reb *@
@using FribergHomes.Client.DTOs
@using FribergHomes.Client.Services.Interfaces
@inject ISalesObject salesService

<h4>Sök bostad via kommun:</h4>
<form @onsubmit="SubmitName">
    <input type="text" @bind="countyName" />
    <button type="submit">Sök</button>
</form>
@if (SaleObjectsDtos != null)
{
    @if (SaleObjectsDtos.Count > 0)
    {
        foreach (var salesObject in SaleObjectsDtos)
        {
            <GetById ObjectId="@salesObject.Id" ObjectType="SalesObject" ObjectToShow="null" />
        }
    }
    else
    {
        <p>Inga annonser i denna kommun</p>
    }
}

@code {
    private List<SalesObjectDTO> SaleObjectsDtos;
    private string countyName;

    private async void SubmitName()
    {
        SaleObjectsDtos = await salesService.GetSalesByCounty(countyName);
        StateHasChanged();
    }
}

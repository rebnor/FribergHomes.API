@* Author: Reb 2024-04-26*@
@page "/county"
@using FribergHomes.Client.DTOs
@using FribergHomes.Client.Services.Interfaces
@using FribergHomes.Client.Components
@using System.Text.Json
@inject ICounty countyService

<h3>Kommun</h3>

<hr />

<h4>Sök kommun via Id:</h4>
<form @onsubmit="SubmitId">
    <input type="number" @bind="countyId" />
    <button type="submit">Hämta kommun</button>
</form>
@if (countyId != 0)
{
    <GetById ObjectId="@countyId" ObjectType="County" ObjectToShow="null" />
}

<h4>Sök kommun via namn:</h4>
<form @onsubmit="SubmitName">
    <input type="text" @bind="countyName" />
    <button type="submit">Hämta kommun</button>
</form>

@if (countyName != "")
{
    <GetByName ObjectName="@countyName" ObjectType="County" ObjectToShow="null" />
}




@code {
    private CountyDTO? CountyDto { get; set; }

    private List<CountyDTO> CountiesDtos;

    private int countyId = 0;
    private string countyName = "";

    private async void SubmitId()
    {
        CountyDto = await countyService.GetCountyByIdAsync(countyId);
        StateHasChanged();
    }
    private async void SubmitName()
    {
        CountyDto = await countyService.GetCountyByNameAsync(countyName);
        StateHasChanged();
    }

    // protected override async Task OnInitializedAsync()
    // {
    //     try
    //     {
    //         // CountyDto = await countyService.GetCountyByIdAsync(objectIdValue);
    //         CountiesDtos = await countyService.GetAllCountiesAsync();
    //         // CountyDto = await countyService.GetCountyByNameAsync(CountyDto.Name);
    //     }
    //     catch (Exception ex)
    //     {
    //         Console.WriteLine(ex);
    //     }


    // }


}
